# 요구명세서

## 1. 기능 요구사항
### 1.1 DID 관리
- DID 생성: 클라이언트는 공개키(Base58)와 method를 전달하여 DID를 생성할 수 있어야 한다.
- DID 등록: 생성된 DID Document를 Registry에 저장할 수 있어야 한다.
- DID 해석(Resolve): DID를 입력하면 DID Document를 조회할 수 있어야 한다.
- DID 업데이트: DID Document 업데이트 요청을 처리할 수 있어야 한다.

### 1.2 VC/VP 발급 및 검증
- Issuer는 VC 발급 요청을 수신하고 서명된 VC를 응답한다.
- Client는 VC를 기반으로 VP를 생성할 수 있어야 한다.
- Relying Party는 VP 유효성을 검증할 수 있어야 한다.

### 1.3 인증 챌린지/응답
- Relying Party는 DID 기반 인증 챌린지를 발급해야 한다.
- Client는 챌린지를 복호화/서명하여 응답한다.
- Relying Party는 응답을 검증하고 결과를 반환한다.

### 1.4 REST API(서비스 엔드포인트)
- REST 엔드포인트를 통해 DID 생성 및 조회 테스트 API 제공
- Swagger(OpenAPI) 문서를 자동 산출할 수 있어야 한다.

## 2. 비기능 요구사항
- 로컬 개발 환경 기준 5개 서비스 동시 구동
- gRPC 통신 유지(교육용 핵심), REST는 보조
- DID/VC/VP 시나리오 데모 성공률 95% 이상
- 테스트: did 영역 커버리지 95% 목표

## 3. 인터페이스 요구사항
### 3.1 gRPC 서비스
- Registry
  - scCreateDID
  - scResolveDID
  - scUpdateDID
- Registrar(DID-Registrar)
  - createDID
  - registerDID (현재 PoC에서는 Unimplemented 처리)
  - resolveDID
  - updateDID
- Issuer
  - RequestCredential
  - ReqCredIdCard
  - ReqCredDlCard
  - ReqCredRentalCarAgreement
  - RentalCarControl
- RelyingParty
  - AuthChallenge
  - AuthResponse
  - SimplePresent
  - VerifyVp

### 3.2 REST 서비스
- did_service_endpoint
  - POST /v2/testapi/create-did/
  - GET /v2/testapi/get-did/:some_id
  - GET /v2/testapi/get-did-public-key/:some_id

## 4. 데이터 요구사항
- DID Document: Registry에 저장 (LevelDB)
- VC/VP: JWT 기반 서명/검증
- 키: .env 기반 로컬 저장(교육 목적)

## 5. 환경/구성 요구사항
- configs/configs.yml 기반 서비스 주소/포트 설정
- .env에 ETH_PRIVATE_KEY_HEX 필수
- 기본 포트: 50051~50055

## 6. 테스트 요구사항
- 단위 테스트: `make unit-test`
- 통합 테스트: `make integration-test`
- 커버리지: `make coverage-did`
